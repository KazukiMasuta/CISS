
<!DOCTYPE html>
{% extends 'cissapp/layout.html' %}
{% load static %}
{% load topicsfilters %}
<head>
    <meta charset="UTF-8">
    <meta http-equiv="content-language" content="ja">
    <link href="{% static 'style.css' %}" rel="stylesheet">
    <title>トピック作成</title>
</head>
{% block title %}test_detail {{ block.super }}{% endblock %}
{% block content %}
<div class="ui grid stackable">
    <div class="eleven wide column">
        <div class="ui segment">
            <div class="content">
                <div class="data"><h3>{{data.name}}</h3></div>
                <table class="table">
                    <thead>
                      <tr>
                        <th>科目種別</th>
                        <th>授業番号</th>
                        <th>学期</th>
                        <th>曜日</th>
                        <th>科目</th>
                        <th>時限</th>
                        <th>担当教員</th>
                        <th>単位</th>
                        <th>投稿一覧</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>{{data.categoty}}</td>
                        <td>{{data.no}}}</td>
                        <td>{{class.semester}}</td>
                        <td>{{class.day}}</td>
                        <td>{{class.name}}</td>
                        <td>{{class.period}}</td>
                        <td>{{class.teacher}}</td>
                        <td>{{class.credit}}</td>

                      </tr>
                    </tbody>
                  </table>
                <p>
                    科目種別：{{data.categoty}}<br>
                    授業番号：{{data.no}}<br>
                    学期：{{data.semester}}<br>
                    曜日：{{data.day}}<br>
                    時間：{{data.period}}<br>
                    先生：{{data.teacher}}<br>
                    単位数：{{data.credit}}<br>
                    idは{{data.id}}
                </p>
            </div>
        <!--コメント投稿-->
        <h4>新規投稿</h4>
        <div class="ui segment">
            <form class="" action="" method="POST">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="ui button" name="next" value="confirm">作成</button>
            </form>
        </div>
        <!--//コメント投稿-->
        <!--コメント表示-->
        <h4>投稿一覧</h4>
        <div class="ui segment">
            {% if posts %}
            {% for post in posts %}
            <div class="ui segment secondary">
                <p>投稿日：{{post.created}}<br>タイトル：{{post.title}}</p>
                <!--いいね機能-->
                {% if post.pub_flg %}
                <p>投稿内容：{{post.content | comment_filter | safe}}</p>
                <div class="ui right aligned vertical segment">
                    <div class="vote_button" style="cursor: pointer;"
                    data-comment-id="{{post.id}}" data-count="{{post.vote_count}}">
                        <i class="heart outline icon"></i>
                        <span class="vote_counter">
                        {% if post.vote_count >= 0 %}
                            {{post.vote_count}}
                        {% endif %}
                        </span>
                    </div>
                </div>
                {% else %}
                <p style="color: grey">コメントは非表示とされました</p>
                {% endif %}
                <!--//いいね機能-->
            </div>
            {% endfor %}
            {% else %}
            <div class="ui warning message"><p>まだコメントはありません</p></div>
            {% endif %}
        </div>
        <!--//コメント表示-->

        </div>
    </div>
</div>
{% endblock %}
{% block js %}
<script src="{% static 'js/vote.js' %}" type='text/javascript'></script>
{% endblock %}
